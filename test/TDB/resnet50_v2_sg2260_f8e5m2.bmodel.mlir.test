RUN: bmodel_dis.py %p/bmodel/resnet50_v2_sg2260_f8e5m2.bmodel | FileCheck %s

CHECK:  module attributes {chip = "SG2260", version = 2.2} {
CHECK:    func.func @resnet50_v2(%G2.0: memref<1x3x224x224xf32, strides: [150528, 50176, 224, 1]>) -> (memref<1x1000xf32, strides: [1000, 1]>) ({
CHECK:      ^bb0(%G2.0: memref<1x3x224x224xf32, strides: [150528, 50176, 224, 1]>)    //  run_mode=TPU_STATIC
CHECK-NEXT:       %R0, %D1C0 = "dma.matrix"(%G2.0, %B0C0) : (memref<1x1x3x32768xf32, strides: [0, 0, 32768, 1]>, none) -> (memref<3x32768xf32, strides: [512, 512, 0, 1]>, none)
CHECK-NEXT:       %R8, %B1C0 = "arith.cast"(%R0, %D1C0) {round_mode = 1}: (memref<3x64x1x512xf32, strides: [512, 512, 512, 1]>, none) -> (memref<3x64x1x512xf8e5m2, strides: [512, 512, 512, 1]>, none)
CHECK-NEXT:       %R4, %D2C0 = "dma.matrix"(%G2.393216, %B0C0) : (memref<1x1x1x32768xf32, strides: [0, 0, 32768, 1]>, none) -> (memref<1x32768xf32, strides: [512, 512, 0, 1]>, none)
CHECK-NEXT:       %R12, %B2C0 = "arith.cast"(%R4, %D2C0) {round_mode = 1}: (memref<1x64x1x512xf32, strides: [512, 512, 512, 1]>, none) -> (memref<1x64x1x512xf8e5m2, strides: [512, 512, 512, 1]>, none)
CHECK-NEXT:       %G2.602112, %D3C0 = "dma.matrix"(%R8, %B1C0) : (memref<1x1x1x512xf8, strides: [0, 0, 0, 1]>, none) -> (memref<1x512xf8, strides: [0, 0, 0, 1]>, none)
CHECK-NEXT:       %R0, %D4C0 = "dma.matrix"(%G2.524288, %B1C0) : (memref<1x1x1x19456xf32, strides: [0, 0, 19456, 1]>, none) -> (memref<1x19456xf32, strides: [512, 512, 0, 1]>, none)
CHECK-NEXT:       %R8, %B3C0 = "arith.cast"(%R0, %D4C0) {round_mode = 1}: (memref<1x38x1x512xf32, strides: [512, 512, 512, 1]>, none) -> (memref<1x38x1x512xf8e5m2, strides: [512, 512, 512, 1]>, none)
CHECK-NEXT:       %G2.700416, %D5C0 = "dma.matrix"(%R12, %B2C0) : (memref<1x1x1x512xf8, strides: [0, 0, 0, 1]>, none) -> (memref<1x512xf8, strides: [0, 0, 0, 1]>, none)
CHECK-NEXT:       %G2.733184, %D6C0 = "dma.matrix"(%R8, %B3C0) : (memref<1x1x1x512xf8, strides: [0, 0, 0, 1]>, none) -> (memref<1x512xf8, strides: [0, 0, 0, 1]>, none)
CHECK-NEXT:       %R5, %D7C0 = "dma.tensor"(%G1.4096, %B3C0) : (memref<1x64x1x3200xi8, strides: [204800, 3200, 3200, 1]>, none) -> (memref<1x64x1x3200xi8, strides: [3200, 3200, 3200, 1]>, none)
CHECK-NEXT:       %R0, %D8C0 = "dma.tensor"(%G2.753664, %B3C0) : (memref<1x3x224x224xi8, strides: [150528, 50176, 224, 1]>, none) -> (memref<1x3x224x224xi8, strides: [50176, 50176, 224, 1]>, none)
CHECK-NEXT:       %B4C0 = "system_tr_wr.wr_imm"(%D8C0) {reg_idx0 = 6, reg_idx1 = 127, reg_idx2 = 127, des_imm0 = 81920, des_imm1_h32 = 0, des_imm1_l32 = 0}
CHECK-NEXT:       %R4, %B5C0 = "conv.normal"(%R0, %R5.64, %R5.4, %C0, %R0, %R5, %D8C0) {kernel = [7, 7], stride = [2, 2], in_zero = [0, 0], ke_zero = [0, 0], opt_kernel_rotate = False, pad_mode = 0, pad = [3, 3, 3, 3], opt_res_add = False, do_relu = True, sym_range = False, do_rq = True, round_mode = 0}: (memref<1x3x224x224xf8e5m2, strides: [50176, 50176, 224, 1]>, memref<64x3x7x7xf8e5m2>, memref<1x64x1x1xui32, strides: [1, 1, 1, 1]>, f8e5m2, memref<1x64x1x1xsi16, strides: [1, 1, 1, 1]>, memref<1x64x1x2xsi32, strides: [2, 2, 2, 1]>, none) -> (memref<1x64x112x112xf8e5m2, strides: [12544, 12544, 112, 1]>, none)
CHECK-NEXT:       %R3.8064, %B6C0 = "pord.maxpooling"(%R4, %C127, %D8C0) {kernel = [3, 3], stride = [2, 2], in_zero = [0, 0], ke_zero = [0, 0], opt_kernel_rotate = False, pad_mode = 0, pad = [1, 0, 1, 0], round_mode = 0, shift = 0}: (memref<1x64x112x112xf8e5m2, strides: [12544, 12544, 112, 1]>, f8e5m2, none) -> (memref<1x64x56x56xf8e5m2, strides: [3136, 3136, 56, 1]>, none)
CHECK-NEXT:       %R6, %D9C0 = "dma.tensor"(%G1.221184, %B3C0) : (memref<1x64x1x640xi8, strides: [40960, 640, 640, 1]>, none) -> (memref<1x64x1x640xi8, strides: [640, 640, 640, 1]>, none)
CHECK-NEXT:       %R11.15232, %D10C0 = "dma.tensor"(%G1.262144, %B3C0) : (memref<1x64x1x320xi8, strides: [20480, 320, 320, 1]>, none) -> (memref<1x64x1x320xi8, strides: [320, 320, 320, 1]>, none)
CHECK-NEXT:       %R11.4736, %D11C0 = "dma.tensor"(%G1.516096, %B3C0) : (memref<1x64x1x2368xi8, strides: [151552, 2368, 2368, 1]>, none) -> (memref<1x64x1x2368xi8, strides: [2368, 2368, 2368, 1]>, none)
CHECK-NEXT:       %R11.13568, %D12C0 = "dma.tensor"(%G1.667648, %B3C0) : (memref<1x64x1x1088xi8, strides: [69632, 1088, 1088, 1]>, none) -> (memref<1x64x1x1088xi8, strides: [1088, 1088, 1088, 1]>, none)
CHECK-NEXT:       %R11.7104, %D13C0 = "dma.tensor"(%G1.737280, %B3C0) : (memref<1x64x1x2112xi8, strides: [135168, 2112, 2112, 1]>, none) -> (memref<1x64x1x2112xi8, strides: [2112, 2112, 2112, 1]>, none)
CHECK-NEXT:       %R11.12480, %D14C0 = "dma.tensor"(%G1.880640, %B3C0) : (memref<1x64x1x1088xi8, strides: [69632, 1088, 1088, 1]>, none) -> (memref<1x64x1x1088xi8, strides: [1088, 1088, 1088, 1]>, none)
CHECK-NEXT:       %R11.2368, %D15C0 = "dma.tensor"(%G1.950272, %B3C0) : (memref<1x64x1x2368xi8, strides: [151552, 2368, 2368, 1]>, none) -> (memref<1x64x1x2368xi8, strides: [2368, 2368, 2368, 1]>, none)
CHECK-NEXT:       %R11.11392, %D16C0 = "dma.tensor"(%G1.1101824, %B3C0) : (memref<1x64x1x1088xi8, strides: [69632, 1088, 1088, 1]>, none) -> (memref<1x64x1x1088xi8, strides: [1088, 1088, 1088, 1]>, none)
CHECK-NEXT:       %R11.10304, %D17C0 = "dma.tensor"(%G1.1179648, %B3C0) : (memref<1x64x1x1088xi8, strides: [69632, 1088, 1088, 1]>, none) -> (memref<1x64x1x1088xi8, strides: [1088, 1088, 1088, 1]>, none)
CHECK-NEXT:       %R11, %D18C0 = "dma.tensor"(%G1.1249280, %B3C0) : (memref<1x64x1x2368xi8, strides: [151552, 2368, 2368, 1]>, none) -> (memref<1x64x1x2368xi8, strides: [2368, 2368, 2368, 1]>, none)
CHECK-NEXT:       %R11.9216, %D19C0 = "dma.tensor"(%G1.1400832, %B3C0) : (memref<1x64x1x1088xi8, strides: [69632, 1088, 1088, 1]>, none) -> (memref<1x64x1x1088xi8, strides: [1088, 1088, 1088, 1]>, none)
CHECK-NEXT:       %R11.14656, %D20C0 = "dma.tensor"(%G1.479232, %B3C0) : (memref<1x64x1x576xi8, strides: [36864, 576, 576, 1]>, none) -> (memref<1x64x1x576xi8, strides: [576, 576, 576, 1]>, none)
      